!function(){function e(e){return e&&e.__esModule?e.default:e}var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},n={},o={},r=t.parcelRequire5612;null==r&&((r=function(e){if(e in n)return n[e].exports;if(e in o){var t=o[e];delete o[e];var r={id:e,exports:{}};return n[e]=r,t.call(r.exports,r,r.exports),r.exports}var i=new Error("Cannot find module '"+e+"'");throw i.code="MODULE_NOT_FOUND",i}).register=function(e,t){o[e]=t},t.parcelRequire5612=r),r.register("ds8z5",(function(e,t){"use strict";Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.default=function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}})),r.register("1UHsN",(function(e,t){"use strict";Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.default=function(e,t,n){if(!t.has(e))throw new TypeError("attempted to "+n+" private field on non-instance");return t.get(e)}})),r.register("ffZzF",(function(e,t){"use strict";Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.default=function(e,t){return t.get?t.get.call(e):t.value}})),r.register("5k7tO",(function(e,t){"use strict";Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.default=function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}})),r.register("jdVyQ",(function(e,t){"use strict";Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.default=function(e,t,n){if(t.set)t.set.call(e,n);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=n}}})),r.register("gD1JV",(function(e,t){"use strict";function n(e,t){return(n=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.default=function(e,t){return n(e,t)}})),r.register("aTHs7",(function(e,t){"use strict";Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.default=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}})),r.register("fVNic",(function(e,t){"use strict";function n(e){return(n=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.default=function(e){return n(e)}})),r.register("jmhxu",(function(e,t){"use strict";Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.default=function(e,t){return!t||"object"!==o.default(t)&&"function"!=typeof t?n.default(e):t};var n=i(r("ds8z5")),o=i(r("l5bVx"));function i(e){return e&&e.__esModule?e:{default:e}}})),r.register("l5bVx",(function(e,t){"use strict";Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.default=function(e){return e&&e.constructor===Symbol?"symbol":typeof e}}));var i=r("ds8z5"),a={};Object.defineProperty(a,"__esModule",{value:!0}),a.default=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")};var u={};Object.defineProperty(u,"__esModule",{value:!0}),u.default=function(e,t){var n=s.default(e,t,"get");return c.default(e,n)};var s=l(r("1UHsN")),c=l(r("ffZzF"));function l(e){return e&&e.__esModule?e:{default:e}}var d={};Object.defineProperty(d,"__esModule",{value:!0}),d.default=function(e,t,n){p.default(e,t),t.set(e,n)};var f,p=(f=r("5k7tO"))&&f.__esModule?f:{default:f};var _={};Object.defineProperty(_,"__esModule",{value:!0}),_.default=function(e,t,n){var o=v.default(e,t,"set");return h.default(e,o,n),n};var v=y(r("1UHsN")),h=y(r("jdVyQ"));function y(e){return e&&e.__esModule?e:{default:e}}var w={};function g(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}Object.defineProperty(w,"__esModule",{value:!0}),w.default=function(e,t,n){t&&g(e.prototype,t);n&&g(e,n);return e};var k={};Object.defineProperty(k,"__esModule",{value:!0}),k.default=function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n;return e};var b={};Object.defineProperty(b,"__esModule",{value:!0}),b.default=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&m.default(e,t)};var m=function(e){return e&&e.__esModule?e:{default:e}}(r("gD1JV"));var M={};Object.defineProperty(M,"__esModule",{value:!0}),M.default=function(e){var t=O.default();return function(){var n,o=x.default(e);if(t){var r=x.default(this).constructor;n=Reflect.construct(o,arguments,r)}else n=o.apply(this,arguments);return P.default(this,n)}};var O=j(r("aTHs7")),x=j(r("fVNic")),P=j(r("jmhxu"));function j(e){return e&&e.__esModule?e:{default:e}}var S=document.querySelector(".form"),N=document.querySelector(".workouts"),T=document.querySelector(".form__input--type"),E=document.querySelector(".form__input--distance"),W=document.querySelector(".form__input--duration"),F=document.querySelector(".form__input--cadence"),D=document.querySelector(".form__input--elevation"),V=function(){"use strict";function t(n,o,r){e(a)(this,t),e(k)(this,"date",new Date),e(k)(this,"id",(Date.now()+"").slice(-10)),e(k)(this,"clicks",0),this.coords=n,this.distance=o,this.duration=r}return e(w)(t,[{key:"_setDescription",value:function(){this.description="".concat(this.type[0].toUpperCase()).concat(this.type.slice(1)," on ").concat(["January","February","March","April","May","June","July","August","September","October","November","December"][this.date.getMonth()]," ").concat(this.date.getDate())}},{key:"click",value:function(){this.clicks+=1}}]),t}(),q=function(t){"use strict";e(b)(o,t);var n=e(M)(o);function o(t,r,u,s){var c;return e(a)(this,o),c=n.call(this,t,r,u),e(k)(e(i)(c),"type","running"),c.cadence=s,c.calcPace(),c._setDescription(),c}return e(w)(o,[{key:"calcPace",value:function(){return this.pace=this.duration/this.distance,this.pace}}]),o}(V),C=function(t){"use strict";e(b)(o,t);var n=e(M)(o);function o(t,r,u,s){var c;return e(a)(this,o),c=n.call(this,t,r,u),e(k)(e(i)(c),"type","cycling"),c.elevationGain=s,c.calcSpeed(),c._setDescription(),c}return e(w)(o,[{key:"calcSpeed",value:function(){return this.spped=this.distance/(this.duration/60),this.spped}}]),o}(V),R=new WeakMap,z=new WeakMap,H=new WeakMap,J=new WeakMap,U=function(){"use strict";function t(){e(a)(this,t),e(d)(this,R,{writable:!0,value:void 0}),e(d)(this,z,{writable:!0,value:13}),e(d)(this,H,{writable:!0,value:void 0}),e(d)(this,J,{writable:!0,value:[]}),this._getPosition(),this._getLocalStorage(),S.addEventListener("submit",this._newWorkout.bind(this)),T.addEventListener("change",this._toggleElevationField.bind(this)),N.addEventListener("click",this._moveToPopup.bind(this))}return e(w)(t,[{key:"_getPosition",value:function(){navigator.geolocation&&navigator.geolocation.getCurrentPosition(this._loadMap.bind(this))}},{key:"_loadMap",value:function(t){var n=this,o=[t.coords.latitude,t.coords.longitude];e(_)(this,R,L.map("map").setView(o,e(u)(this,z))),L.tileLayer("https://tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'}).addTo(e(u)(this,R)),e(u)(this,R).on("click",this._showForm.bind(this)),e(u)(this,J).forEach((function(e){n._renderWorkoutMarker(e)}))}},{key:"_showForm",value:function(t){e(_)(this,H,t),S.classList.remove("hidden"),E.focus()}},{key:"_hideForm",value:function(){E.value=W.value=F.value=D.value="",S.style.display="none",S.classList.add("hidden"),setTimeout((function(){return S.style.display="grid"}),1e3)}},{key:"_toggleElevationField",value:function(e){D.closest(".form__row").classList.toggle("form__row--hidden"),F.closest(".form__row").classList.toggle("form__row--hidden")}},{key:"_newWorkout",value:function(t){var n=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.every((function(e){return Number.isFinite(e)}))},o=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.every((function(e){return e>0}))};t.preventDefault();var r,i=T.value,a=Number(E.value),s=Number(W.value),c=e(u)(this,H).latlng,l=c.lat,d=c.lng;if("running"===i){var f=Number(F.value);if(!n(a,s,f)||!o(a,s,f))return alert("Input have to be positive number!");r=new q([l,d],a,s,f)}if("cycling"===i){var p=Number(D.value);if(!n(a,s,p)||!o(a,s))return alert("Input have to be positive number!");r=new C([l,d],a,s,p)}e(u)(this,J).push(r),this._renderWorkoutMarker(r),this._renderWorkout(r),this._hideForm(),this._setLocalStorage()}},{key:"_renderWorkoutMarker",value:function(t){L.marker(t.coords).addTo(e(u)(this,R)).bindPopup(L.popup({maxWidth:250,maxHeight:100,autoClose:!1,closeOnClick:!1,className:"".concat(t.type,"-popup")})).setPopupContent("".concat("running"===t.type?"üèÉ‚Äç‚ôÇÔ∏è":"üö¥‚Äç‚ôÄÔ∏è"," ").concat(t.description)).openPopup()}},{key:"_renderWorkout",value:function(e){var t='\n    <li class="workout workout--'.concat(e.type,'" data-id="').concat(e.id,'">\n          <h2 class="workout__title">').concat(e.description,'</h2>\n          <div class="workout__details">\n            <span class="workout__icon">').concat("running"===e.type?"üèÉ‚Äç‚ôÇÔ∏è":"üö¥‚Äç‚ôÄÔ∏è",'</span>\n            <span class="workout__value">').concat(e.distance,'</span>\n            <span class="workout__unit">km</span>\n          </div>\n          <div class="workout__details">\n            <span class="workout__icon">‚è±</span>\n            <span class="workout__value">').concat(e.duration,'</span>\n            <span class="workout__unit">min</span>\n          </div>\n    ');"running"===e.type&&(t+='\n      <div class="workout__details">\n            <span class="workout__icon">‚ö°Ô∏è</span>\n            <span class="workout__value">'.concat(e.pace.toFixed(1),'</span>\n            <span class="workout__unit">min/km</span>\n          </div>\n          <div class="workout__details">\n            <span class="workout__icon">ü¶∂üèº</span>\n            <span class="workout__value">').concat(e.cadence,'</span>\n            <span class="workout__unit">spm</span>\n          </div>\n        </li>\n      ')),"cycling"===e.type&&(t+='<div class="workout__details">\n            <span class="workout__icon">‚ö°Ô∏è</span>\n            <span class="workout__value">'.concat(e.spped.toFixed(1),'</span>\n            <span class="workout__unit">km/h</span>\n          </div>\n          <div class="workout__details">\n            <span class="workout__icon">‚õ∞</span>\n            <span class="workout__value">').concat(e.elevationGain,'</span>\n            <span class="workout__unit">m</span>\n          </div>\n        </li>')),S.insertAdjacentHTML("afterend",t)}},{key:"_moveToPopup",value:function(t){var n=t.target.closest(".workout");if(n){console.log(n);var o=e(u)(this,J).find((function(e){return e.id===n.dataset.id}));console.log(o),e(u)(this,R).setView(o.coords,e(u)(this,z),{animate:!0,pan:{duration:1}}),o.click()}}},{key:"_setLocalStorage",value:function(){localStorage.setItem("workouts",JSON.stringify(e(u)(this,J)))}},{key:"_getLocalStorage",value:function(){var t=this,n=JSON.parse(localStorage.getItem("workouts"));n&&(e(_)(this,J,n),e(u)(this,J).forEach((function(e){t._renderWorkout(e),t._renderWorkoutMarker(e)})))}}]),t}();new U}();
//# sourceMappingURL=index.a061fa3b.js.map
